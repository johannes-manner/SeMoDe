#!/bin/bash
DIR=deployment
sizes=(5000000 10000000 20000000 40000000 80000000 160000000 320000000 640000000)

if [ -z "$1" ]; then
    echo "Usage: createDeploymentSizes <PATH_TO_SEMODE.JAR>"
    exit 1
fi

./gradlew build

if [ ! -d "$DIR" ]; then
    mkdir -p "$DIR"
fi

# initial size
cp "target/fibonacci-java.zip" "$DIR/fibonacci-java-initial.zip"

echo " "
for size in ${sizes[@]}; do
    echo "Create deployment package size: ${size}"
    echo "..."
    cp "target/fibonacci-java.zip" "$DIR/fibonacci-java-${size}.zip"
    java -jar "$1" "deploymentSize" "$DIR/fibonacci-java-${size}.zip" "$size"
    echo "Done"
    echo " "
done
